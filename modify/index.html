<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <title>Modify - typing-exe</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/styles/github.min.css" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "Modify";
        var mkdocs_page_input_path = "modify.md";
        var mkdocs_page_url = null;
      </script>
    
    <script src="../js/jquery-3.6.0.min.js" defer></script>
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/highlight.min.js"></script>
      <script>hljs.initHighlightingOnLoad();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href=".." class="icon icon-home"> typing-exe
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="..">Home</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../quickstart/">Quickstart</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">typing-exe</span></p>
              <ul class="current">
                  <li class="toctree-l1 current"><a class="reference internal current" href="#">annotations</a>
    <ul class="current">
                <li class="toctree-l2"><a class="reference internal" href="../assert/">Assert</a>
                </li>
                <li class="toctree-l2 current"><a class="reference internal current" href="./">Modify</a>
    <ul class="current">
    </ul>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../sequence/">Sequence</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="#">decorators</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../execute_annotations/">execute_annotations</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../cleanup_annotations/">cleanup_annotations</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="#">early_return</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../early_return/">EarlyReturn</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="#">parameter_data</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../parameter_data/">ParameterData</a>
                </li>
    </ul>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="..">typing-exe</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href=".." class="icon icon-home" alt="Docs"></a> &raquo;</li>
          <li>typing-exe &raquo;</li>
          <li>annotations &raquo;</li>
      <li>Modify</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <p>Modify your parameters before or your return values after execution of your function-body.</p>
<h1 id="usage">Usage</h1>
<pre><code class="language-python">from typing_exe.annotations import Modify
from typing_exe.decorators import execute_annotations, cleanup_annotations

@cleanup_annotations
@execute_annotations
def foo(
           a: Modify[lambda a: 3 + 2*a + 4*a**2 + a**3], 
           b: Modify[float, lambda b: abs(b)]
) -&gt; Modify[lambda r, a, b: r if a + b &lt; 10_000 else r/100]:
     return a - b
</code></pre>
<p>The example is completely meaningless and only serves to demonstrate the how-to, not the why, of using <code>Modify</code>.</p>
<h1 id="description">Description</h1>
<p>As the two typehints in the example above show, the first entry can either be a typehint, 
or a modification. All other entries are modifications (an arbitrary number of them).</p>
<p>The typehint will be ignored by Modify. Its purpose is twofold: Firstly, it helps readability.
Secondly, when <a href="https://snimu.github.io/typing-exe/execute_annotations/">@execute_annotations</a>
is paired with <a href="https://snimu.github.io/typing-exe/cleanup_annotations/">@cleanup_annotations</a>, 
only that typehint will be left in the function's annotations, so that the function can be used 
properly by other packages such as <a href="https://github.com/FelixTheC/strongtyping">strongtyping</a>.</p>
<p>The modifications are functions that 
take the parameter, modify it, and then return it 
(this only works if your function, foo in the example above, is decorated with 
@execute_annotations). </p>
<p>It is also possible to make comparisons with other parameters by simply giving your modification-function
more than one parameter, where the first parameter is assumed to be the one that is annotated, 
while the others are the other parameters. It is important that those parameters are called the 
same in both the modification-function (the lambda in the return-annotation in the example) and 
the annotated function (foo in the example above). The name of the parameter itself in the 
modification-function is irrelevant but should, for readability, usually be the same as the parameter
that is annotated by this modification-function.</p>
<p>For example, the following works:</p>
<pre><code class="language-python">from typing_exe.annotations import Modify


def foo(a, b: Modify[lambda whatever, a: whatever + a]):
    ...
</code></pre>
<p>But this doesn't:</p>
<pre><code class="language-python">from typing_exe.annotations import Modify


def foo(a, b: Modify[lambda b, whatever: b + whatever]):
    ...
</code></pre>
<p>Good form would be the following:</p>
<pre><code class="language-python">from typing_exe.annotations import Modify


def foo(a, b: Modify[lambda b, a: b + a]):
     ...
</code></pre>
<p>Of course, the modification-functions don't have to be lambdas. </p>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../assert/" class="btn btn-neutral float-left" title="Assert"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="../sequence/" class="btn btn-neutral float-right" title="Sequence">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
      <span><a href="../assert/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../sequence/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script>var base_url = '..';</script>
    <script src="../js/theme_extra.js" defer></script>
    <script src="../js/theme.js" defer></script>
      <script src="../search/main.js" defer></script>
    <script defer>
        window.onload = function () {
            SphinxRtdTheme.Navigation.enable(true);
        };
    </script>

</body>
</html>
